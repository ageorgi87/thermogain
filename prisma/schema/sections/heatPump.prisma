// Section 3: Heat Pump Project
// Stores specifications for the planned heat pump installation

model ProjectHeatPump {
  id        String  @id @default(cuid())
  projectId String  @unique
  project   Project @relation(fields: [projectId], references: [id], onDelete: Cascade)

  heatPumpType   String
  heatPumpPowerKw Float?
  estimatedCop    Float? // Manufacturer's nominal COP (standardized conditions)
  adjustedCop     Float? // Real COP adjusted for temperature, emitters, climate zone
  emitters        String? // Emitter type (automatically determines flow temperature)

  // Estimated heat pump lifespan in years (REQUIRED in form - based on ADEME studies)
  heatPumpLifespanYears Int?

  // Fixed costs and subscriptions (November 2024)
  // Electricity price (€/kWh) - REQUIRED in form
  // Auto-filled from API via useEffect if undefined
  electricityPricePerKwh Float?

  // Current electrical power subscription (in kVA: 3, 6, 9, 12, 15, 18)
  // Retrieved from previous section (currentHeating) or defaults to 6 kVA
  currentSubscribedPowerKva Int?

  // Recommended electrical power subscription for heat pump (in kVA: 6, 9, 12, 15, 18)
  // Smart calculation based on heatPumpPowerKw, but user-modifiable
  heatPumpSubscribedPowerKva Int?

  // Annual heat pump maintenance cost (€/year)
  // REQUIRED in form - standard value 120€/year
  annualMaintenanceCost Float?

  // Electricity price for heat pump (€/kWh) - can be different from current price
  // Optional: for off-peak rates or other specific contracts
  heatPumpElectricityPricePerKwh Float?

  // DHW (Domestic Hot Water) management with heat pump
  // Only applicable for water-based heat pumps (Air/Water, Water/Water)
  // null for Air/Air heat pumps
  withDhwManagement Boolean?

  // DHW storage tank volume (liters)
  // Only if withDhwManagement = true
  dhwTankVolumeLiters Int?

  // COP for DHW production (automatically calculated: estimatedCop × 0.85)
  // Lower than heating COP due to higher water temperature (55-60°C vs 35-45°C)
  // Only if withDhwManagement = true
  dhwCop Float?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
